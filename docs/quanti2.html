<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title> 9 Dados quantitativos absolutos: mapa dos pontos de contagem (ou densidade de pontos) | Cartografia Temática em R para estudantes de Geografia</title>
  <meta name="description" content=" 9 Dados quantitativos absolutos: mapa dos pontos de contagem (ou densidade de pontos) | Cartografia Temática em R para estudantes de Geografia" />
  <meta name="generator" content="bookdown 0.35 and GitBook 2.6.7" />

  <meta property="og:title" content=" 9 Dados quantitativos absolutos: mapa dos pontos de contagem (ou densidade de pontos) | Cartografia Temática em R para estudantes de Geografia" />
  <meta property="og:type" content="book" />
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content=" 9 Dados quantitativos absolutos: mapa dos pontos de contagem (ou densidade de pontos) | Cartografia Temática em R para estudantes de Geografia" />
  
  
  

<meta name="author" content="Ligia Vizeu Barrozo" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="quanti1.html"/>
<link rel="next" href="quanti3.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>
<script src="libs/htmlwidgets-1.6.2/htmlwidgets.js"></script>
<link href="libs/leaflet-1.3.1/leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-1.3.1/leaflet.js"></script>
<link href="libs/leafletfix-1.0.0/leafletfix.css" rel="stylesheet" />
<script src="libs/proj4-2.6.2/proj4.min.js"></script>
<script src="libs/Proj4Leaflet-1.0.1/proj4leaflet.js"></script>
<link href="libs/rstudio_leaflet-1.3.1/rstudio_leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-binding-2.1.2/leaflet.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">R Carto Tem Geo</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Apresentação</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#referência-citada"><i class="fa fa-check"></i>Referência citada</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="sobre-o-livro.html"><a href="sobre-o-livro.html"><i class="fa fa-check"></i>Sobre o livro</a></li>
<li class="chapter" data-level="" data-path="agradecimentos.html"><a href="agradecimentos.html"><i class="fa fa-check"></i>Agradecimentos</a></li>
<li class="chapter" data-level="1" data-path="intro.html"><a href="intro.html"><i class="fa fa-check"></i><b>1</b> Introdução</a>
<ul>
<li class="chapter" data-level="1.1" data-path="intro.html"><a href="intro.html#o-programa-r"><i class="fa fa-check"></i><b>1.1</b> O programa R</a></li>
<li class="chapter" data-level="1.2" data-path="intro.html"><a href="intro.html#instalação-do-r-e-rstudio"><i class="fa fa-check"></i><b>1.2</b> Instalação do R e RStudio</a>
<ul>
<li class="chapter" data-level="1.2.1" data-path="intro.html"><a href="intro.html#instalação-do-r-para-windows"><i class="fa fa-check"></i><b>1.2.1</b> Instalação do R para Windows</a></li>
<li class="chapter" data-level="1.2.2" data-path="intro.html"><a href="intro.html#instalação-do-r-para-mac"><i class="fa fa-check"></i><b>1.2.2</b> Instalação do R para Mac</a></li>
<li class="chapter" data-level="1.2.3" data-path="intro.html"><a href="intro.html#instalação-do-rstudio"><i class="fa fa-check"></i><b>1.2.3</b> Instalação do RStudio</a></li>
<li class="chapter" data-level="1.2.4" data-path="intro.html"><a href="intro.html#instalação-do-rtools"><i class="fa fa-check"></i><b>1.2.4</b> Instalação do RTools</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2" data-path="basico.html"><a href="basico.html"><i class="fa fa-check"></i><b>2</b> Básico do básico do R e RStudio</a>
<ul>
<li class="chapter" data-level="2.1" data-path="basico.html"><a href="basico.html#os-paineis"><i class="fa fa-check"></i><b>2.1</b> Os paineis</a></li>
<li class="chapter" data-level="2.2" data-path="basico.html"><a href="basico.html#tipos-de-objetos"><i class="fa fa-check"></i><b>2.2</b> Tipos de objetos</a></li>
<li class="chapter" data-level="2.3" data-path="basico.html"><a href="basico.html#estrutura-dos-dados"><i class="fa fa-check"></i><b>2.3</b> Estrutura dos dados</a></li>
<li class="chapter" data-level="2.4" data-path="basico.html"><a href="basico.html#vetores"><i class="fa fa-check"></i><b>2.4</b> Vetores</a></li>
<li class="chapter" data-level="2.5" data-path="basico.html"><a href="basico.html#nomeando-os-vetores"><i class="fa fa-check"></i><b>2.5</b> Nomeando os vetores</a></li>
<li class="chapter" data-level="2.6" data-path="basico.html"><a href="basico.html#seleção-em-vetores"><i class="fa fa-check"></i><b>2.6</b> Seleção em vetores</a></li>
<li class="chapter" data-level="2.7" data-path="basico.html"><a href="basico.html#totais-e-médias-em-vetores"><i class="fa fa-check"></i><b>2.7</b> Totais e médias em vetores</a></li>
<li class="chapter" data-level="2.8" data-path="basico.html"><a href="basico.html#matrizes"><i class="fa fa-check"></i><b>2.8</b> Matrizes</a></li>
<li class="chapter" data-level="2.9" data-path="basico.html"><a href="basico.html#cálculos-em-matrizes"><i class="fa fa-check"></i><b>2.9</b> Cálculos em Matrizes</a></li>
<li class="chapter" data-level="2.10" data-path="basico.html"><a href="basico.html#seleção-em-matrizes"><i class="fa fa-check"></i><b>2.10</b> Seleção em Matrizes</a></li>
<li class="chapter" data-level="2.11" data-path="basico.html"><a href="basico.html#fatores"><i class="fa fa-check"></i><b>2.11</b> Fatores</a></li>
<li class="chapter" data-level="2.12" data-path="basico.html"><a href="basico.html#referências-citadas"><i class="fa fa-check"></i><b>2.12</b> Referências citadas</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="dataframes.html"><a href="dataframes.html"><i class="fa fa-check"></i><b>3</b> Dataframes</a>
<ul>
<li class="chapter" data-level="3.1" data-path="dataframes.html"><a href="dataframes.html#criação-de-dataframe"><i class="fa fa-check"></i><b>3.1</b> Criação de dataframe</a></li>
<li class="chapter" data-level="3.2" data-path="dataframes.html"><a href="dataframes.html#importação-de-um-dataframe"><i class="fa fa-check"></i><b>3.2</b> Importação de um dataframe</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="tidyverse.html"><a href="tidyverse.html"><i class="fa fa-check"></i><b>4</b> Básico do Tidyverse</a>
<ul>
<li class="chapter" data-level="4.1" data-path="tidyverse.html"><a href="tidyverse.html#o-operador-pipe-no-tidyverse"><i class="fa fa-check"></i><b>4.1</b> O operador Pipe no tidyverse</a></li>
<li class="chapter" data-level="4.2" data-path="tidyverse.html"><a href="tidyverse.html#selecionando-colunas"><i class="fa fa-check"></i><b>4.2</b> Selecionando colunas</a></li>
<li class="chapter" data-level="4.3" data-path="tidyverse.html"><a href="tidyverse.html#combinando-dataframes"><i class="fa fa-check"></i><b>4.3</b> Combinando dataframes</a></li>
<li class="chapter" data-level="4.4" data-path="tidyverse.html"><a href="tidyverse.html#filtrando-observações"><i class="fa fa-check"></i><b>4.4</b> Filtrando observações</a></li>
<li class="chapter" data-level="4.5" data-path="tidyverse.html"><a href="tidyverse.html#organizando-uma-tabela-com-a-função-arrange"><i class="fa fa-check"></i><b>4.5</b> Organizando uma tabela com a função <code>arrange()</code></a></li>
<li class="chapter" data-level="4.6" data-path="tidyverse.html"><a href="tidyverse.html#o-verbo-mutate"><i class="fa fa-check"></i><b>4.6</b> O verbo “mutate”</a></li>
<li class="chapter" data-level="4.7" data-path="tidyverse.html"><a href="tidyverse.html#agrupando-dados-com-a-função-group_by"><i class="fa fa-check"></i><b>4.7</b> Agrupando dados com a função <code>group_by</code></a></li>
<li class="chapter" data-level="4.8" data-path="tidyverse.html"><a href="tidyverse.html#rumo-aos-mapas"><i class="fa fa-check"></i><b>4.8</b> Rumo aos mapas</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="tipos.html"><a href="tipos.html"><i class="fa fa-check"></i><b>5</b> Tipos de dados, conceitos e representação cartográfica</a>
<ul>
<li class="chapter" data-level="5.1" data-path="tipos.html"><a href="tipos.html#definição-do-tipo-de-representação-cartográfica"><i class="fa fa-check"></i><b>5.1</b> Definição do tipo de representação cartográfica</a></li>
<li class="chapter" data-level="5.2" data-path="tipos.html"><a href="tipos.html#variáveis-visuais"><i class="fa fa-check"></i><b>5.2</b> Variáveis visuais</a></li>
<li class="chapter" data-level="5.3" data-path="tipos.html"><a href="tipos.html#o-conceito-diversidade"><i class="fa fa-check"></i><b>5.3</b> O conceito <em>diversidade</em></a></li>
<li class="chapter" data-level="5.4" data-path="tipos.html"><a href="tipos.html#o-conceito-ordem"><i class="fa fa-check"></i><b>5.4</b> O conceito <em>ordem</em></a></li>
<li class="chapter" data-level="5.5" data-path="tipos.html"><a href="tipos.html#o-conceito-de-proporcionalidade"><i class="fa fa-check"></i><b>5.5</b> O conceito de <em>proporcionalidade</em></a></li>
<li class="chapter" data-level="5.6" data-path="tipos.html"><a href="tipos.html#referências-sugeridas"><i class="fa fa-check"></i><b>5.6</b> Referências sugeridas</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="quali1.html"><a href="quali1.html"><i class="fa fa-check"></i><b>6</b> Dados qualitativos: mapa corocromático nominal</a>
<ul>
<li class="chapter" data-level="6.1" data-path="quali1.html"><a href="quali1.html#instalando-e-carregando-pacotes-do-r"><i class="fa fa-check"></i><b>6.1</b> Instalando e carregando pacotes do R</a></li>
<li class="chapter" data-level="6.2" data-path="quali1.html"><a href="quali1.html#o-pacote-geobr"><i class="fa fa-check"></i><b>6.2</b> O pacote geobr</a></li>
<li class="chapter" data-level="6.3" data-path="quali1.html"><a href="quali1.html#projeção-cartográfica"><i class="fa fa-check"></i><b>6.3</b> Projeção cartográfica</a></li>
<li class="chapter" data-level="6.4" data-path="quali1.html"><a href="quali1.html#iniciando-com-o-ggplot2"><i class="fa fa-check"></i><b>6.4</b> Iniciando com o ggplot2</a></li>
<li class="chapter" data-level="6.5" data-path="quali1.html"><a href="quali1.html#biomas-do-brasil"><i class="fa fa-check"></i><b>6.5</b> Biomas do Brasil</a></li>
<li class="chapter" data-level="" data-path="quali1.html"><a href="quali1.html#referências-citadas-1"><i class="fa fa-check"></i>Referências citadas</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="quali2.html"><a href="quali2.html"><i class="fa fa-check"></i><b>7</b> Dados qualitativos: mapa corocromático ordinal</a>
<ul>
<li class="chapter" data-level="7.1" data-path="quali2.html"><a href="quali2.html#banco-de-dados"><i class="fa fa-check"></i><b>7.1</b> Banco de dados</a></li>
<li class="chapter" data-level="7.2" data-path="quali2.html"><a href="quali2.html#potencial-de-agressividade-climática-na-amazônia-legal-do-brasil"><i class="fa fa-check"></i><b>7.2</b> Potencial de agressividade climática na Amazônia Legal do Brasil</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="quanti1.html"><a href="quanti1.html"><i class="fa fa-check"></i><b>8</b> Dados quantitativos absolutos: mapa das figuras geométricas proporcionais</a>
<ul>
<li class="chapter" data-level="8.1" data-path="quanti1.html"><a href="quanti1.html#bases-de-dados"><i class="fa fa-check"></i><b>8.1</b> Bases de dados</a></li>
<li class="chapter" data-level="8.2" data-path="quanti1.html"><a href="quanti1.html#centroides-dos-municípios"><i class="fa fa-check"></i><b>8.2</b> Centroides dos municípios</a></li>
<li class="chapter" data-level="8.3" data-path="quanti1.html"><a href="quanti1.html#mapa-da-população-do-estado-de-são-paulo"><i class="fa fa-check"></i><b>8.3</b> Mapa da população do estado de São Paulo</a></li>
<li class="chapter" data-level="8.4" data-path="quanti1.html"><a href="quanti1.html#referências-sugeridas-1"><i class="fa fa-check"></i><b>8.4</b> Referências sugeridas</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="quanti2.html"><a href="quanti2.html"><i class="fa fa-check"></i><b>9</b> Dados quantitativos absolutos: mapa dos pontos de contagem (ou densidade de pontos)</a>
<ul>
<li class="chapter" data-level="9.1" data-path="quanti2.html"><a href="quanti2.html#bases-de-dados-1"><i class="fa fa-check"></i><b>9.1</b> Bases de dados</a></li>
<li class="chapter" data-level="9.2" data-path="quanti2.html"><a href="quanti2.html#definição-dos-pontos-aleatórios"><i class="fa fa-check"></i><b>9.2</b> Definição dos pontos aleatórios</a></li>
<li class="chapter" data-level="9.3" data-path="quanti2.html"><a href="quanti2.html#mapa-de-raça-ou-cor-dos-residentes-do-município-de-são-paulo"><i class="fa fa-check"></i><b>9.3</b> Mapa de raça ou cor dos residentes do município de São Paulo</a></li>
<li class="chapter" data-level="9.4" data-path="quanti2.html"><a href="quanti2.html#referências-sugeridas-2"><i class="fa fa-check"></i><b>9.4</b> Referências sugeridas</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="quanti3.html"><a href="quanti3.html"><i class="fa fa-check"></i><b>10</b> Dados quantitativos relativos: mapa coroplético</a>
<ul>
<li class="chapter" data-level="10.1" data-path="quanti3.html"><a href="quanti3.html#bancos-de-dados"><i class="fa fa-check"></i><b>10.1</b> Bancos de dados</a></li>
<li class="chapter" data-level="10.2" data-path="quanti3.html"><a href="quanti3.html#mapas-coropléticos"><i class="fa fa-check"></i><b>10.2</b> Mapas coropléticos</a>
<ul>
<li class="chapter" data-level="10.2.1" data-path="quanti3.html"><a href="quanti3.html#o-número-de-classes"><i class="fa fa-check"></i><b>10.2.1</b> O número de classes</a></li>
<li class="chapter" data-level="10.2.2" data-path="quanti3.html"><a href="quanti3.html#histogramas-das-variáveis"><i class="fa fa-check"></i><b>10.2.2</b> Histogramas das variáveis</a></li>
<li class="chapter" data-level="10.2.3" data-path="quanti3.html"><a href="quanti3.html#os-intervalos-de-classes"><i class="fa fa-check"></i><b>10.2.3</b> Os intervalos de classes</a></li>
<li class="chapter" data-level="10.2.4" data-path="quanti3.html"><a href="quanti3.html#escalacores"><i class="fa fa-check"></i><b>10.2.4</b> A escala de cores</a></li>
</ul></li>
<li class="chapter" data-level="10.3" data-path="quanti3.html"><a href="quanti3.html#layout-do-mapa-coroplético-de-idhm-da-rmsp"><i class="fa fa-check"></i><b>10.3</b> Layout do mapa coroplético de IDHM da RMSP</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="quanti4.html"><a href="quanti4.html"><i class="fa fa-check"></i><b>11</b> Mapa coroplético interativo</a>
<ul>
<li class="chapter" data-level="11.1" data-path="quanti4.html"><a href="quanti4.html#indo-além-proposta-de-exercício"><i class="fa fa-check"></i><b>11.1</b> Indo além: Proposta de exercício</a></li>
<li class="chapter" data-level="11.2" data-path="quanti4.html"><a href="quanti4.html#referências-sugeridas-3"><i class="fa fa-check"></i><b>11.2</b> Referências sugeridas</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="quanti5.html"><a href="quanti5.html"><i class="fa fa-check"></i><b>12</b> Dados quantitativos a partir de amostras: mapa isarítmico</a>
<ul>
<li class="chapter" data-level="12.1" data-path="quanti5.html"><a href="quanti5.html#abordagens-de-interpolação-espacial"><i class="fa fa-check"></i><b>12.1</b> Abordagens de interpolação espacial</a>
<ul>
<li class="chapter" data-level="12.1.1" data-path="quanti5.html"><a href="quanti5.html#abordagens-determinísticas"><i class="fa fa-check"></i><b>12.1.1</b> Abordagens determinísticas</a></li>
<li class="chapter" data-level="12.1.2" data-path="quanti5.html"><a href="quanti5.html#abordagens-estocásticas"><i class="fa fa-check"></i><b>12.1.2</b> Abordagens Estocásticas</a></li>
</ul></li>
<li class="chapter" data-level="12.2" data-path="quanti5.html"><a href="quanti5.html#referências-citadas-2"><i class="fa fa-check"></i><b>12.2</b> Referências citadas</a></li>
<li class="chapter" data-level="12.3" data-path="quanti5.html"><a href="quanti5.html#sugestões-de-leitura"><i class="fa fa-check"></i><b>12.3</b> Sugestões de leitura</a></li>
</ul></li>
<li class="chapter" data-level="13" data-path="quanti6.html"><a href="quanti6.html"><i class="fa fa-check"></i><b>13</b> Mapa de fluxos: movimentos no espaço</a></li>
<li class="chapter" data-level="14" data-path="osm.html"><a href="osm.html"><i class="fa fa-check"></i><b>14</b> Usando dados do Open Street Map</a></li>
<li class="chapter" data-level="15" data-path="anamorf.html"><a href="anamorf.html"><i class="fa fa-check"></i><b>15</b> Anamorfose</a></li>
<li class="chapter" data-level="16" data-path="sintese.html"><a href="sintese.html"><i class="fa fa-check"></i><b>16</b> Mapas de síntese</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Cartografia Temática em R para estudantes de Geografia</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="quanti2" class="section level1 hasAnchor" number="9">
<h1><span class="header-section-number"> 9</span> Dados quantitativos absolutos: mapa dos pontos de contagem (ou densidade de pontos)<a href="quanti2.html#quanti2" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p>Diferente do mapa de figuras proporcionais, onde o tamanho das figuras remete à ideia de proporção, os pontos de contagem permitem estabelecer a ideia de densidade ao representar determinada quantidade espalhada aleatoriamente dentro dos polígonos de unidades administrativas.</p>
<p>Utilizaremos como exemplo os dados de etnia da população na escala intraurbana do município de São Paulo. Cada ponto terá um valor de número de residentes por Distrito Administrativo. Aos pontos atribuiremos cores para proporcionar a visualização da distribuição espacial das etnias por área. Este mapa tem como inspiração o mapa de grupos étnicos de Chicago, desenvovido por <a href="http://www.radicalcartography.net/index.html?chicagodots">Bill Rankin (2009)</a>. Foi replicado em Londres para os votos segundo partidos políticos <a href="https://gist.github.com/PaulC91/9cc8551d5475620cb5c5d87ee1609257">Tom Campbell</a>. Este script foi utilizado e adaptado para a elaboração do mapa da população segundo etnia em São Paulo, que será desenvolvido a seguir.</p>
<div id="bases-de-dados-1" class="section level2 hasAnchor" number="9.1">
<h2><span class="header-section-number">9.1</span> Bases de dados<a href="quanti2.html#bases-de-dados-1" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Para a elaboração deste mapa precisaremos de dados da população segundo cor ou raça. O IBGE define cinco grupos de cor ou raça autodeclarados durante a pesquisa do Censo Demográfico: raça ou cor branca, preta, amarela, parda e indígena. Usaremos os dados disponíveis mais recentes que são os de 2010. A base cartográfica será a malha dos Distritos, também disponíveis no site do IBGE.</p>
<p>Para darmos início, vamos limpar a memória e verificar o diretório.</p>
<div class="sourceCode" id="cb301"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb301-1"><a href="quanti2.html#cb301-1" tabindex="-1"></a><span class="co">#para limpar a memoria</span></span>
<span id="cb301-2"><a href="quanti2.html#cb301-2" tabindex="-1"></a><span class="fu">rm</span>(<span class="at">list=</span> <span class="fu">ls</span>())</span>
<span id="cb301-3"><a href="quanti2.html#cb301-3" tabindex="-1"></a><span class="co">#para verificar o diretório de trabalho</span></span>
<span id="cb301-4"><a href="quanti2.html#cb301-4" tabindex="-1"></a><span class="fu">getwd</span>()</span></code></pre></div>
<pre><code>## [1] &quot;C:/Users/l_viz/Documents/RCartoTematica&quot;</code></pre>
<p>É sempre bom deixarmos alinhado com a língua que usaremos para evitar problemas com acentuação nos títulos. Também vamos desativar a notação científica para que os códigos do IBGE apareçam por completo.</p>
<div class="sourceCode" id="cb303"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb303-1"><a href="quanti2.html#cb303-1" tabindex="-1"></a><span class="co">#para ajustar a lingua para portugues usando a funcao</span></span>
<span id="cb303-2"><a href="quanti2.html#cb303-2" tabindex="-1"></a><span class="fu">Sys.setlocale</span>(<span class="at">category =</span> <span class="st">&quot;LC_ALL&quot;</span>, <span class="at">locale =</span> <span class="st">&quot;pt_BR.UTF-8&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;LC_COLLATE=pt_BR.UTF-8;LC_CTYPE=pt_BR.UTF-8;LC_MONETARY=pt_BR.UTF-8;LC_NUMERIC=C;LC_TIME=pt_BR.UTF-8&quot;</code></pre>
<div class="sourceCode" id="cb305"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb305-1"><a href="quanti2.html#cb305-1" tabindex="-1"></a><span class="co">#para desativar a notação científica</span></span>
<span id="cb305-2"><a href="quanti2.html#cb305-2" tabindex="-1"></a><span class="fu">options</span>(<span class="at">scipen =</span> <span class="dv">999</span>)</span></code></pre></div>
<div class="sourceCode" id="cb306"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb306-1"><a href="quanti2.html#cb306-1" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">&quot;R.utils&quot;</span>)</span></code></pre></div>
<p>Carregamos os pacotes que serão utilizados.</p>
<div class="sourceCode" id="cb307"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb307-1"><a href="quanti2.html#cb307-1" tabindex="-1"></a><span class="fu">library</span>(R.utils)</span>
<span id="cb307-2"><a href="quanti2.html#cb307-2" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb307-3"><a href="quanti2.html#cb307-3" tabindex="-1"></a><span class="fu">library</span>(sf)</span>
<span id="cb307-4"><a href="quanti2.html#cb307-4" tabindex="-1"></a><span class="fu">library</span>(ggplot2,<span class="at">warn.conflicts=</span><span class="cn">FALSE</span>)</span>
<span id="cb307-5"><a href="quanti2.html#cb307-5" tabindex="-1"></a><span class="fu">library</span>(ggspatial)</span>
<span id="cb307-6"><a href="quanti2.html#cb307-6" tabindex="-1"></a><span class="fu">library</span>(stringr)</span></code></pre></div>
<p>O arquivo shapefile dos Distritos estão disponíveis no FTP do IBGE por Unidade da Federação. Desta forma, faremos o download do arquivo zip após a identificação da url (<em>Uniform Resource Locator</em>, ou Localizador Uniforme de Recursos - significa endereço web, ou seja, o texto que você digita na barra do navegador para acessar uma determinada página ou serviço). Para isso, usaremos a função <code>download.file</code> do pacote <strong>R.utils</strong>. A documentação completa dos pacotes e funções estão disponíveis em <a href="https://www.rdocumentation.org/">R documentation</a>.</p>
<div class="sourceCode" id="cb308"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb308-1"><a href="quanti2.html#cb308-1" tabindex="-1"></a>url <span class="ot">&lt;-</span> <span class="st">&quot;https://geosampa.prefeitura.sp.gov.br/PaginasPublicas/downloadArquivo.aspx?orig=DownloadCamadas&amp;arq=01_Limites%20Administrativos%5C%5CDistrito%5C%5CShapefile%5C%5CSIRGAS_SHP_distrito&amp;arqTipo=Shapefile&quot;</span></span>
<span id="cb308-2"><a href="quanti2.html#cb308-2" tabindex="-1"></a></span>
<span id="cb308-3"><a href="quanti2.html#cb308-3" tabindex="-1"></a>destfile <span class="ot">&lt;-</span> <span class="st">&quot;C:/Users/l_viz/Documents/RCartoTematica/shapefile.zip&quot;</span></span>
<span id="cb308-4"><a href="quanti2.html#cb308-4" tabindex="-1"></a></span>
<span id="cb308-5"><a href="quanti2.html#cb308-5" tabindex="-1"></a><span class="fu">download.file</span>(url, destfile, <span class="at">mode=</span><span class="st">&#39;wb&#39;</span>)</span></code></pre></div>
<p>Descompacte o arquivo zip diretamente na pasta de trabalho. Vamos abrir o shapefile com a função <code>st_read</code> do pacote <strong>R.utils</strong>.</p>
<div class="sourceCode" id="cb309"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb309-1"><a href="quanti2.html#cb309-1" tabindex="-1"></a><span class="co">#para abrir o arquivo shapefile dos distritos da UF São Paulo </span></span>
<span id="cb309-2"><a href="quanti2.html#cb309-2" tabindex="-1"></a>sp_distr <span class="ot">&lt;-</span> <span class="fu">st_read</span>(<span class="st">&quot;C:/Users/l_viz/Documents/RCartoTematica/SIRGAS_SHP_distrito/SIRGAS_SHP_distrito.shp&quot;</span>)</span></code></pre></div>
<pre><code>## Reading layer `SIRGAS_SHP_distrito&#39; from data source 
##   `C:\Users\l_viz\Documents\RCartoTematica\SIRGAS_SHP_distrito\SIRGAS_SHP_distrito.shp&#39; 
##   using driver `ESRI Shapefile&#39;
## Simple feature collection with 96 features and 7 fields
## Geometry type: POLYGON
## Dimension:     XY
## Bounding box:  xmin: 313389.7 ymin: 7343743 xmax: 360618.2 ymax: 7416156
## Projected CRS: SIRGAS 2000 / UTM zone 23S</code></pre>
<p>Para verificar o tipo de objeto, usamos <code>class</code> do pacote <strong>R.utils</strong>. Para olharmos as 6 primeiras linhas do objeto, usamos a função <code>head</code> do mesmo pacote.</p>
<div class="sourceCode" id="cb311"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb311-1"><a href="quanti2.html#cb311-1" tabindex="-1"></a><span class="co">#para verificar o tipo de objeto</span></span>
<span id="cb311-2"><a href="quanti2.html#cb311-2" tabindex="-1"></a><span class="fu">class</span>(sp_distr)</span></code></pre></div>
<pre><code>## [1] &quot;sf&quot;         &quot;data.frame&quot;</code></pre>
<div class="sourceCode" id="cb313"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb313-1"><a href="quanti2.html#cb313-1" tabindex="-1"></a><span class="co">#para vermos as 6 primeiras linhas</span></span>
<span id="cb313-2"><a href="quanti2.html#cb313-2" tabindex="-1"></a><span class="fu">head</span>(sp_distr)</span></code></pre></div>
<pre><code>## Simple feature collection with 6 features and 7 fields
## Geometry type: POLYGON
## Dimension:     XY
## Bounding box:  xmin: 315542 ymin: 7343743 xmax: 360618.2 ymax: 7408231
## Projected CRS: SIRGAS 2000 / UTM zone 23S
##   ds_codigo        ds_nome ds_sigla ds_cd_sub       ds_subpref ds_areamt ds_areakmt
## 1        51       MANDAQUI      MAN        05 SANTANA-TUCURUVI  13247864      13.25
## 2        52       MARSILAC      MAR        20      PARELHEIROS 208195746     208.20
## 3        32          MOEMA      MOE        12     VILA MARIANA   9079516       9.08
## 4        31     GUAIANASES      GUA        28       GUAIANASES   8938527       8.94
## 5        33       IGUATEMI      IGU        30       SAO MATEUS  19583557      19.58
## 6        36 ITAIM PAULISTA      IPA        24   ITAIM PAULISTA  12143789      12.14
##                         geometry
## 1 POLYGON ((330950.4 7407837,...
## 2 POLYGON ((336124.1 7355302,...
## 3 POLYGON ((331242.2 7392162,...
## 4 POLYGON ((355108.2 7393291,...
## 5 POLYGON ((350859.9 7389600,...
## 6 POLYGON ((359239.6 7402470,...</code></pre>
<p>Vamos visualizar os Distritos usando <code>ggplot</code> do pacote <strong>ggplot2</strong>, definindo a geometria a partir de <code>geom_sf</code> com o contorno na cor preta e o preenchimento em cinza claro.</p>
<div class="sourceCode" id="cb315"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb315-1"><a href="quanti2.html#cb315-1" tabindex="-1"></a><span class="co">#para plotar a camada dos distritos do estado de SP</span></span>
<span id="cb315-2"><a href="quanti2.html#cb315-2" tabindex="-1"></a><span class="fu">ggplot</span>()<span class="sc">+</span></span>
<span id="cb315-3"><a href="quanti2.html#cb315-3" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="at">data =</span> sp_distr, <span class="at">colour =</span> <span class="st">&quot;black&quot;</span>, <span class="at">fill =</span> <span class="st">&quot;grey90&quot;</span>) <span class="co">#para plotar</span></span></code></pre></div>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:plot-distr-ufsp"></span>
<img src="bookdownproj_files/figure-html/plot-distr-ufsp-1.png" alt="Malha" width="672" />
<p class="caption">
Figure 9.1: Malha
</p>
</div>
<div class="sourceCode" id="cb316"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb316-1"><a href="quanti2.html#cb316-1" tabindex="-1"></a><span class="co">#para ver as colunas de sp_distr</span></span>
<span id="cb316-2"><a href="quanti2.html#cb316-2" tabindex="-1"></a><span class="fu">names</span>(sp_distr)</span></code></pre></div>
<pre><code>## [1] &quot;ds_codigo&quot;  &quot;ds_nome&quot;    &quot;ds_sigla&quot;   &quot;ds_cd_sub&quot;  &quot;ds_subpref&quot; &quot;ds_areamt&quot; 
## [7] &quot;ds_areakmt&quot; &quot;geometry&quot;</code></pre>
<div class="sourceCode" id="cb318"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb318-1"><a href="quanti2.html#cb318-1" tabindex="-1"></a><span class="fu">head</span>(sp_distr)</span></code></pre></div>
<pre><code>## Simple feature collection with 6 features and 7 fields
## Geometry type: POLYGON
## Dimension:     XY
## Bounding box:  xmin: 315542 ymin: 7343743 xmax: 360618.2 ymax: 7408231
## Projected CRS: SIRGAS 2000 / UTM zone 23S
##   ds_codigo        ds_nome ds_sigla ds_cd_sub       ds_subpref ds_areamt ds_areakmt
## 1        51       MANDAQUI      MAN        05 SANTANA-TUCURUVI  13247864      13.25
## 2        52       MARSILAC      MAR        20      PARELHEIROS 208195746     208.20
## 3        32          MOEMA      MOE        12     VILA MARIANA   9079516       9.08
## 4        31     GUAIANASES      GUA        28       GUAIANASES   8938527       8.94
## 5        33       IGUATEMI      IGU        30       SAO MATEUS  19583557      19.58
## 6        36 ITAIM PAULISTA      IPA        24   ITAIM PAULISTA  12143789      12.14
##                         geometry
## 1 POLYGON ((330950.4 7407837,...
## 2 POLYGON ((336124.1 7355302,...
## 3 POLYGON ((331242.2 7392162,...
## 4 POLYGON ((355108.2 7393291,...
## 5 POLYGON ((350859.9 7389600,...
## 6 POLYGON ((359239.6 7402470,...</code></pre>
<p>A segunda etapa será a obtenção dos dados de raça ou cor a partir dos dados do Censo de 2010. Precisaremos fazer isso manualmente. Baixe os arquivos correspondentes ao município de São Paulo a partir do ftp do IBGE na sua pasta de trabalho <a href="https://ftp.ibge.gov.br/Censos/Censo_Demografico_2010/Resultados_do_Universo/Agregados_por_Setores_Censitarios/SP_Capital_20190823.zip" class="uri">https://ftp.ibge.gov.br/Censos/Censo_Demografico_2010/Resultados_do_Universo/Agregados_por_Setores_Censitarios/SP_Capital_20190823.zip</a>.
Descompacte o arquivo manualmente na pasta do diretório onde se encontra para podermos selecionar e ler o arquivo que queremos. Depois de descompactado, execute a linha a seguir. <code>read.table</code> lerá o arquivo Pessoa03_SP1 de extensão csv com separador entre colunas “;” e primeira linha contendo os nomes das variáveis “(header = TRUE)”, criando o objeto de nome “pessoa”. Aproveitaremos para já selecionar as colunas que nos interessam usando <code>%&gt;%</code> (<em>pipe</em>, que pode ser lido como “então”) e a função <code>select</code> selecionando a coluna de código do setor e as variáveis “V001” a “V006”. Com a função <code>head</code> verificamos as 6 primeiras linhas do objeto “pessoa”.
A documentação do Censo com todas as planilhas e variáveis encontra-se no arquivo <a href="https://ftp.ibge.gov.br/Censos/Censo_Demografico_2010/Resultados_do_Universo/Agregados_por_Setores_Censitarios/Documentacao_Agregado_dos_Setores_20180416.zip">BASE DE INFORMAÇÕES POR SETOR CENSITÁRIO Censo 2010 - Universo.pdf</a>.</p>
<div class="sourceCode" id="cb320"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb320-1"><a href="quanti2.html#cb320-1" tabindex="-1"></a><span class="co">#para ler o arquivo Pessoa03_SP1.csv</span></span>
<span id="cb320-2"><a href="quanti2.html#cb320-2" tabindex="-1"></a>pessoa <span class="ot">&lt;-</span> <span class="fu">read.table</span>(<span class="st">&quot;C:/Users/l_viz/Documents/RCartoTematica/Base informaçoes setores2010 universo SP_Capital/CSV/Pessoa03_SP1.csv&quot;</span>, <span class="at">sep=</span><span class="st">&quot;;&quot;</span>, <span class="at">header=</span>T) <span class="sc">%&gt;%</span></span>
<span id="cb320-3"><a href="quanti2.html#cb320-3" tabindex="-1"></a>  <span class="fu">select</span>(Cod_setor, V001, V002, V003, V004, V005, V006)</span>
<span id="cb320-4"><a href="quanti2.html#cb320-4" tabindex="-1"></a><span class="fu">head</span>(pessoa)</span></code></pre></div>
<pre><code>##         Cod_setor V001 V002 V003 V004 V005 V006
## 1 355030801000001  806  661   23    3  119    0
## 2 355030801000002  913  730   16    4  163    0
## 3 355030801000003  625  521   25    8   71    0
## 4 355030801000004  572  430   26    8  108    0
## 5 355030801000005  754  580   28   23  123    0
## 6 355030801000006  643  552   11    0   80    0</code></pre>
<p>O resultado da função <code>head</code> nos mostra que as variáveis de “V002” a “V006” são do tipo caractere (chr). Teremos que alterar para “integer” para que possam ser executados cálculos com estes valores. Vamos usar <code>mutate</code> que permite a transformação de todas estas variáveis de uma única vez. Ou seja, se a variável for caractere, será transformada em “integer”.</p>
<div class="sourceCode" id="cb322"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb322-1"><a href="quanti2.html#cb322-1" tabindex="-1"></a><span class="co">#para transformar todas as variáveis do tipo chr em int</span></span>
<span id="cb322-2"><a href="quanti2.html#cb322-2" tabindex="-1"></a>pessoa <span class="ot">&lt;-</span> pessoa <span class="sc">%&gt;%</span> </span>
<span id="cb322-3"><a href="quanti2.html#cb322-3" tabindex="-1"></a> <span class="fu">mutate_if</span>(is.character, as.integer)</span></code></pre></div>
<p>O aviso resultante do comando diz que foram introduzidos valores do tipo “NA” (not available, ou seja, valores faltantes) onde havia valores não numéricos do tipo “x”. O IBGE restringe a informação para proteção de dados dos informantes. Segundo a documentação,</p>
<blockquote>
<p>“No arquivo agregado por setores, o IBGE optou pela restrição de dados como forma de proteção dos dados dos informantes do Censo Demográfico 2010. Assim, em todos os setores com menos de cinco domicílios particulares permanentes foram omitidos os valores da maioria das variáveis de dados. Foram mantidas apenas as variáveis estruturais tais como: a identificação das subdivisões geográficas, o número de domicílios e a população por sexo. Para indicar a omissão dos dados, os valores das variáveis foram preenchidos com “x”. (IBGE, 2011, p.35)&gt;</p>
</blockquote>
<p>Como vimos, a coluna “Cod_setor” aparece como numérica “dbl”(double) e precisa ser convertida para caractere. Usamos a função a seguir.</p>
<div class="sourceCode" id="cb323"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb323-1"><a href="quanti2.html#cb323-1" tabindex="-1"></a><span class="co">#para converter &quot;dbl&quot; para &quot;chr&quot;</span></span>
<span id="cb323-2"><a href="quanti2.html#cb323-2" tabindex="-1"></a>pessoa <span class="ot">&lt;-</span> pessoa <span class="sc">%&gt;%</span></span>
<span id="cb323-3"><a href="quanti2.html#cb323-3" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Cod_setor =</span> <span class="fu">as.character</span>(Cod_setor))</span>
<span id="cb323-4"><a href="quanti2.html#cb323-4" tabindex="-1"></a><span class="co">#para ver as 6 primeiras linhas</span></span>
<span id="cb323-5"><a href="quanti2.html#cb323-5" tabindex="-1"></a><span class="fu">head</span>(pessoa)</span></code></pre></div>
<pre><code>##         Cod_setor V001 V002 V003 V004 V005 V006
## 1 355030801000001  806  661   23    3  119    0
## 2 355030801000002  913  730   16    4  163    0
## 3 355030801000003  625  521   25    8   71    0
## 4 355030801000004  572  430   26    8  108    0
## 5 355030801000005  754  580   28   23  123    0
## 6 355030801000006  643  552   11    0   80    0</code></pre>
<p>Como vamos precisar unir a tabela de dados com o shapefile, as colunas de identificadores devem ser exatamente iguais. No shapefile temos 96 Distritos Administrativos, cuja coluna de identificação é CD_GEOCODD, com 9 dígitos. Na tabela “pessoa”, o identificador é “Cod_setor”, com 15 dígitos. Desta forma, precisaremos compatibilizar os identificadores deixando “Cod_setor” com 9 dígitos também.</p>
<div class="sourceCode" id="cb325"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb325-1"><a href="quanti2.html#cb325-1" tabindex="-1"></a><span class="co">#para deixar o codigo do setor com o mesmo numero de caracteres do codigo do distrito</span></span>
<span id="cb325-2"><a href="quanti2.html#cb325-2" tabindex="-1"></a>pessoa<span class="sc">$</span>Cod_setor <span class="ot">&lt;-</span> <span class="fu">substring</span>(pessoa<span class="sc">$</span>Cod_setor, <span class="dv">8</span>, <span class="dv">9</span>)</span>
<span id="cb325-3"><a href="quanti2.html#cb325-3" tabindex="-1"></a><span class="co">#para ver as 6 primeiras linhas</span></span>
<span id="cb325-4"><a href="quanti2.html#cb325-4" tabindex="-1"></a><span class="fu">head</span>(pessoa)</span></code></pre></div>
<pre><code>##   Cod_setor V001 V002 V003 V004 V005 V006
## 1        01  806  661   23    3  119    0
## 2        01  913  730   16    4  163    0
## 3        01  625  521   25    8   71    0
## 4        01  572  430   26    8  108    0
## 5        01  754  580   28   23  123    0
## 6        01  643  552   11    0   80    0</code></pre>
<div class="sourceCode" id="cb327"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb327-1"><a href="quanti2.html#cb327-1" tabindex="-1"></a><span class="co">#para ver o tipo de objeto</span></span>
<span id="cb327-2"><a href="quanti2.html#cb327-2" tabindex="-1"></a><span class="fu">class</span>(pessoa)</span></code></pre></div>
<pre><code>## [1] &quot;data.frame&quot;</code></pre>
<div class="sourceCode" id="cb329"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb329-1"><a href="quanti2.html#cb329-1" tabindex="-1"></a><span class="co">#para visualizar a tabela</span></span>
<span id="cb329-2"><a href="quanti2.html#cb329-2" tabindex="-1"></a><span class="fu">View</span>(pessoa)</span></code></pre></div>
<p>Ao abrirmos a tabela com a função <code>View</code>, percebemos que temos os códigos com 9 dígitos, mas continuamos com 18.363 linhas referentes aos setores censitários e não as 96 dos Distritos! Como cada Distrito tem vários setores (em média, 18.363/96=191 setores), precisamos somá-los dentro de cada Distrito para termos os valores corretos de cada variável, com um total de 96 linhas. Ou seja, precisamos agregar os valores dos setores por meio de soma.</p>
<div class="sourceCode" id="cb330"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb330-1"><a href="quanti2.html#cb330-1" tabindex="-1"></a><span class="co"># Para agregar as variáveis das colunas 2 a 7, usando Cod_setor como quebra, função de soma e ignorando os valores NA</span></span>
<span id="cb330-2"><a href="quanti2.html#cb330-2" tabindex="-1"></a>pessoa_distr <span class="ot">&lt;-</span> <span class="fu">aggregate</span>(pessoa[,<span class="dv">2</span><span class="sc">:</span><span class="dv">7</span>],<span class="at">by=</span><span class="fu">list</span>(pessoa<span class="sc">$</span>Cod_setor),<span class="at">FUN=</span>sum, <span class="at">na.rm=</span><span class="cn">TRUE</span>)</span></code></pre></div>
<div class="sourceCode" id="cb331"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb331-1"><a href="quanti2.html#cb331-1" tabindex="-1"></a><span class="co">#para ver o arquivo</span></span>
<span id="cb331-2"><a href="quanti2.html#cb331-2" tabindex="-1"></a><span class="fu">View</span>(pessoa_distr)</span></code></pre></div>
<p>Agora sim, temos uma tabela com os 96 Distritos administrativos de São Paulo e os valores somados de cada variável. Vamos, então, corrigir os nomes das colunas.</p>
<div class="sourceCode" id="cb332"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb332-1"><a href="quanti2.html#cb332-1" tabindex="-1"></a><span class="co">#para alterar os nomes das colunas de pessoa_distr</span></span>
<span id="cb332-2"><a href="quanti2.html#cb332-2" tabindex="-1"></a><span class="fu">names</span>(pessoa_distr) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&#39;ds_codigo&#39;</span>, <span class="st">&#39;Total&#39;</span>, <span class="st">&#39;Branca&#39;</span>, <span class="st">&#39;Preta&#39;</span>, <span class="st">&#39;Amarela&#39;</span>, <span class="st">&#39;Parda&#39;</span>, <span class="st">&#39;Indigena&#39;</span>)</span>
<span id="cb332-3"><a href="quanti2.html#cb332-3" tabindex="-1"></a><span class="co">#para verificar que a alteração foi feita</span></span>
<span id="cb332-4"><a href="quanti2.html#cb332-4" tabindex="-1"></a><span class="fu">names</span>(pessoa_distr)</span></code></pre></div>
<pre><code>## [1] &quot;ds_codigo&quot; &quot;Total&quot;     &quot;Branca&quot;    &quot;Preta&quot;     &quot;Amarela&quot;   &quot;Parda&quot;     &quot;Indigena&quot;</code></pre>
<div class="sourceCode" id="cb334"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb334-1"><a href="quanti2.html#cb334-1" tabindex="-1"></a><span class="fu">class</span>(pessoa_distr)</span></code></pre></div>
<pre><code>## [1] &quot;data.frame&quot;</code></pre>
<div class="sourceCode" id="cb336"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb336-1"><a href="quanti2.html#cb336-1" tabindex="-1"></a><span class="fu">View</span>(pessoa_distr)</span></code></pre></div>
<p>Observe que ‘ds_codigo’ em sp_distr tem apenas 1 dígito para os códigos menores do que 10 enquanto que ‘ds_codigo’ de pessoa_distr tem 2 dígitos para os códigos menores do que 10. Precisamos tornar estes campos iguais para que a união seja correta. Vamos usar o pacote <code>stringr</code> para isso.</p>
<div class="sourceCode" id="cb337"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb337-1"><a href="quanti2.html#cb337-1" tabindex="-1"></a><span class="fu">library</span>(stringr)</span>
<span id="cb337-2"><a href="quanti2.html#cb337-2" tabindex="-1"></a></span>
<span id="cb337-3"><a href="quanti2.html#cb337-3" tabindex="-1"></a>sp_distr <span class="ot">&lt;-</span> sp_distr <span class="sc">%&gt;%</span> </span>
<span id="cb337-4"><a href="quanti2.html#cb337-4" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">ds_codigo =</span> <span class="fu">str_pad</span>(ds_codigo, <span class="at">width=</span><span class="dv">2</span>,</span>
<span id="cb337-5"><a href="quanti2.html#cb337-5" tabindex="-1"></a>                             <span class="at">pad=</span><span class="st">&quot;0&quot;</span>))</span></code></pre></div>
<p>Com a tabela compatível com o shapefile, podemos uni-los. Vamos chamar o novo objeto de “sp_pessoa_distr” e usar a função <code>left_join</code>, indicando o campo de união (ds_codigo). Uniremos o data.frame “pessoa_distr” ao objeto “sf” (simple feature) “sp_distr”. Então, tranformamos o novo objeto em classe “sf” com a função <code>st_as_sf</code>.</p>
<div class="sourceCode" id="cb338"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb338-1"><a href="quanti2.html#cb338-1" tabindex="-1"></a><span class="co">#para unir o arquivo shapefile com o dataframe</span></span>
<span id="cb338-2"><a href="quanti2.html#cb338-2" tabindex="-1"></a>sp_pessoa_distr <span class="ot">&lt;-</span> sp_distr <span class="sc">%&gt;%</span></span>
<span id="cb338-3"><a href="quanti2.html#cb338-3" tabindex="-1"></a>  <span class="fu">left_join</span>(pessoa_distr, <span class="at">by =</span> <span class="st">&quot;ds_codigo&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb338-4"><a href="quanti2.html#cb338-4" tabindex="-1"></a>  <span class="fu">st_as_sf</span>()</span>
<span id="cb338-5"><a href="quanti2.html#cb338-5" tabindex="-1"></a><span class="co">#para conferir os nomes das colunas</span></span>
<span id="cb338-6"><a href="quanti2.html#cb338-6" tabindex="-1"></a><span class="fu">names</span>(sp_pessoa_distr)</span></code></pre></div>
<pre><code>##  [1] &quot;ds_codigo&quot;  &quot;ds_nome&quot;    &quot;ds_sigla&quot;   &quot;ds_cd_sub&quot;  &quot;ds_subpref&quot; &quot;ds_areamt&quot; 
##  [7] &quot;ds_areakmt&quot; &quot;Total&quot;      &quot;Branca&quot;     &quot;Preta&quot;      &quot;Amarela&quot;    &quot;Parda&quot;     
## [13] &quot;Indigena&quot;   &quot;geometry&quot;</code></pre>
<div class="sourceCode" id="cb340"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb340-1"><a href="quanti2.html#cb340-1" tabindex="-1"></a><span class="co">#conferindo o tipo de objeto obtido</span></span>
<span id="cb340-2"><a href="quanti2.html#cb340-2" tabindex="-1"></a><span class="fu">head</span>(sp_pessoa_distr)</span></code></pre></div>
<pre><code>## Simple feature collection with 6 features and 13 fields
## Geometry type: POLYGON
## Dimension:     XY
## Bounding box:  xmin: 315542 ymin: 7343743 xmax: 360618.2 ymax: 7408231
## Projected CRS: SIRGAS 2000 / UTM zone 23S
##   ds_codigo        ds_nome ds_sigla ds_cd_sub       ds_subpref ds_areamt ds_areakmt  Total
## 1        51       MANDAQUI      MAN        05 SANTANA-TUCURUVI  13247864      13.25 107580
## 2        52       MARSILAC      MAR        20      PARELHEIROS 208195746     208.20   8258
## 3        32          MOEMA      MOE        12     VILA MARIANA   9079516       9.08  83368
## 4        31     GUAIANASES      GUA        28       GUAIANASES   8938527       8.94 103996
## 5        33       IGUATEMI      IGU        30       SAO MATEUS  19583557      19.58 127662
## 6        36 ITAIM PAULISTA      IPA        24   ITAIM PAULISTA  12143789      12.14 224074
##   Branca Preta Amarela  Parda Indigena                       geometry
## 1  79320  6209    2012  19985       54 POLYGON ((330950.4 7407837,...
## 2   4045   463      92   3533       42 POLYGON ((336124.1 7355302,...
## 3  75550   797    2915   4057       49 POLYGON ((331242.2 7392162,...
## 4  49907  9995     478  43557       59 POLYGON ((355108.2 7393291,...
## 5  61822  8559     785  56373      123 POLYGON ((350859.9 7389600,...
## 6  99761 19493    1333 103245      236 POLYGON ((359239.6 7402470,...</code></pre>
</div>
<div id="definição-dos-pontos-aleatórios" class="section level2 hasAnchor" number="9.2">
<h2><span class="header-section-number">9.2</span> Definição dos pontos aleatórios<a href="quanti2.html#definição-dos-pontos-aleatórios" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>A terceira etapa para a elaboração do mapa de densidade de pontos é a geração de um objeto de pontos definindo o valor de cada ponto. Se temos mais de 11 milhões de pessoas em São Paulo, um mapa com 11 milhões de pontos não ajudaria muito, pois eles cobririam todos os polígonos. Se cada ponto tiver o valor de 200 pessoas, teremos 55 mil pontos. Precisamos ficar atentos com os valores baixos da tabela. A população indígena varia de 16 a 1002 pessoas nos Distritos com menor e maior número, respectivamente. Ou seja, na divisão por 200, distritos com menos de 200 pessoas autodeclaradas indígenas vão ter 1 ponto devido a àproximação que será feita (superestimando valores baixos para evitar polígono com zero ponto desta etnia).</p>
<div class="sourceCode" id="cb342"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb342-1"><a href="quanti2.html#cb342-1" tabindex="-1"></a><span class="co"># para gerar objeto do número de pontos para serem plotados para cada etnia (1 para cada 200 pessoas)</span></span>
<span id="cb342-2"><a href="quanti2.html#cb342-2" tabindex="-1"></a>num.pontos200 <span class="ot">&lt;-</span> <span class="fu">ceiling</span>(<span class="fu">select</span>(<span class="fu">as.data.frame</span>(sp_pessoa_distr), Branca<span class="sc">:</span>Indigena) <span class="sc">/</span> <span class="dv">200</span>)</span>
<span id="cb342-3"><a href="quanti2.html#cb342-3" tabindex="-1"></a><span class="co">#para ver a classe do objeto criado</span></span>
<span id="cb342-4"><a href="quanti2.html#cb342-4" tabindex="-1"></a><span class="fu">class</span>(num.pontos200)</span></code></pre></div>
<pre><code>## [1] &quot;data.frame&quot;</code></pre>
<p>Vamos olhar o objeto gerado.</p>
<div class="sourceCode" id="cb344"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb344-1"><a href="quanti2.html#cb344-1" tabindex="-1"></a><span class="co">#para ver os nomes das colunas</span></span>
<span id="cb344-2"><a href="quanti2.html#cb344-2" tabindex="-1"></a><span class="fu">names</span>(num.pontos200)</span></code></pre></div>
<pre><code>## [1] &quot;Branca&quot;   &quot;Preta&quot;    &quot;Amarela&quot;  &quot;Parda&quot;    &quot;Indigena&quot;</code></pre>
<div class="sourceCode" id="cb346"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb346-1"><a href="quanti2.html#cb346-1" tabindex="-1"></a><span class="co">#para visualizar a tabela</span></span>
<span id="cb346-2"><a href="quanti2.html#cb346-2" tabindex="-1"></a><span class="fu">View</span>(num.pontos200)</span></code></pre></div>
<p>A função <code>sapply</code> aplica o comando para todas as colunas. No caso, usamos <code>sapply</code> para ver a classe de todas as colunas.</p>
<div class="sourceCode" id="cb347"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb347-1"><a href="quanti2.html#cb347-1" tabindex="-1"></a><span class="co">#para converter valores numéricos em inteiros (&quot;integer&quot;)</span></span>
<span id="cb347-2"><a href="quanti2.html#cb347-2" tabindex="-1"></a>num.pontos200 <span class="ot">&lt;-</span> num.pontos200 <span class="sc">%&gt;%</span> </span>
<span id="cb347-3"><a href="quanti2.html#cb347-3" tabindex="-1"></a> <span class="fu">mutate_if</span>(is.numeric, as.integer)</span>
<span id="cb347-4"><a href="quanti2.html#cb347-4" tabindex="-1"></a><span class="co">#para verificar as colunas e tipos de dados</span></span>
<span id="cb347-5"><a href="quanti2.html#cb347-5" tabindex="-1"></a><span class="fu">sapply</span>(num.pontos200, class)</span></code></pre></div>
<pre><code>##    Branca     Preta   Amarela     Parda  Indigena 
## &quot;integer&quot; &quot;integer&quot; &quot;integer&quot; &quot;integer&quot; &quot;integer&quot;</code></pre>
<p>Agora vamos distribuir, de forma aleatória (random) os números de pontos gerados por polígono.</p>
<div class="sourceCode" id="cb349"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb349-1"><a href="quanti2.html#cb349-1" tabindex="-1"></a><span class="co">#para gerar os pontos aleatórios em cada polígono: st_sample gera os pontos em cada polígono</span></span>
<span id="cb349-2"><a href="quanti2.html#cb349-2" tabindex="-1"></a><span class="co">#st_cast lança o conjunto como &quot;POINT&quot;</span></span>
<span id="cb349-3"><a href="quanti2.html#cb349-3" tabindex="-1"></a><span class="co">#st_coordinates extrai as coordenadas para uma matriz</span></span>
<span id="cb349-4"><a href="quanti2.html#cb349-4" tabindex="-1"></a><span class="co">#converte como tibble</span></span>
<span id="cb349-5"><a href="quanti2.html#cb349-5" tabindex="-1"></a><span class="co">#setNames define os nomes das colunas</span></span>
<span id="cb349-6"><a href="quanti2.html#cb349-6" tabindex="-1"></a><span class="co">#cria a variável &quot;Etnia&quot;</span></span>
<span id="cb349-7"><a href="quanti2.html#cb349-7" tabindex="-1"></a><span class="co">#map_df une cada tibble da Etnia em um</span></span>
<span id="cb349-8"><a href="quanti2.html#cb349-8" tabindex="-1"></a>pts <span class="ot">&lt;-</span> <span class="fu">map_df</span>(<span class="fu">names</span>(num.pontos200),</span>
<span id="cb349-9"><a href="quanti2.html#cb349-9" tabindex="-1"></a>              <span class="sc">~</span> <span class="fu">st_sample</span>(sp_pessoa_distr, <span class="at">size =</span> num.pontos200[,.x], <span class="at">type =</span> <span class="st">&quot;random&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb349-10"><a href="quanti2.html#cb349-10" tabindex="-1"></a>                    <span class="fu">st_cast</span>(<span class="st">&quot;POINT&quot;</span>) <span class="sc">%&gt;%</span>                                         </span>
<span id="cb349-11"><a href="quanti2.html#cb349-11" tabindex="-1"></a>                    <span class="fu">st_coordinates</span>() <span class="sc">%&gt;%</span>                                         </span>
<span id="cb349-12"><a href="quanti2.html#cb349-12" tabindex="-1"></a>                    <span class="fu">as_tibble</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb349-13"><a href="quanti2.html#cb349-13" tabindex="-1"></a>                    <span class="fu">setNames</span>(<span class="fu">c</span>(<span class="st">&quot;lon&quot;</span>,<span class="st">&quot;lat&quot;</span>)) <span class="sc">%&gt;%</span>                                  </span>
<span id="cb349-14"><a href="quanti2.html#cb349-14" tabindex="-1"></a>                    <span class="fu">mutate</span>(<span class="at">Etnia =</span> <span class="fu">factor</span>(.x, <span class="at">levels =</span> <span class="fu">names</span>((num.pontos200))))        </span>
<span id="cb349-15"><a href="quanti2.html#cb349-15" tabindex="-1"></a>) </span></code></pre></div>
<p>Vamos definir as cores para cada etnia criando uma paleta de cores com o nome “pal”. Tanto o nome das colunas quanto as cores devem estar entre aspas. Por ser um dado qualitativo, as cores devem ser bem diferentes, evitando ordenamento entre elas.</p>
<div class="sourceCode" id="cb350"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb350-1"><a href="quanti2.html#cb350-1" tabindex="-1"></a><span class="co">#para definir as cores para cada etnia</span></span>
<span id="cb350-2"><a href="quanti2.html#cb350-2" tabindex="-1"></a>pal <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;Branca&quot;</span> <span class="ot">=</span> <span class="st">&quot;#0087DC&quot;</span>, <span class="st">&quot;Preta&quot;</span> <span class="ot">=</span> <span class="st">&quot;#DC241F&quot;</span>, <span class="st">&quot;Amarela&quot;</span> <span class="ot">=</span> <span class="st">&quot;#FCBB30&quot;</span>, <span class="st">&quot;Parda&quot;</span> <span class="ot">=</span> <span class="st">&quot;#70147A&quot;</span>, <span class="st">&quot;Indigena&quot;</span> <span class="ot">=</span> <span class="st">&quot;#78B943&quot;</span>)</span></code></pre></div>
</div>
<div id="mapa-de-raça-ou-cor-dos-residentes-do-município-de-são-paulo" class="section level2 hasAnchor" number="9.3">
<h2><span class="header-section-number">9.3</span> Mapa de raça ou cor dos residentes do município de São Paulo<a href="quanti2.html#mapa-de-raça-ou-cor-dos-residentes-do-município-de-são-paulo" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Finalmente vamos elaborar o mapa adicionando as duas camadas: polígono com os Distritos Administrativos e camada de pontos segundo etnia. O mapa terá o fundo em preto, com os limites dos Distritos e textos em branco. A primeira camada (sp_pessoa_distr) será transparente com contorno branco. A segunda camada conterá a informação do objeto “pts” com os pontos aleatórios por polígono (cada ponto valendo 200 pessoas). As cores dos pontos se referem a cada etnia e são definidas pela paleta “pal”. Definimos o CRS = 4989 (SIRGAS 2000). O tema será “theme_void” onde o tamanho da fonte será 30 pontos. <code>labs</code> define os textos para o título, subtítulo e nota de rodapé. <code>guides</code> define as cores da legenda e o tamanho. Por fim, <code>theme</code> define as cores do painel, posição da legenda, margens, cor dos textos e o tamanho da fonte da nota de rodapé.</p>
<div class="sourceCode" id="cb351"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb351-1"><a href="quanti2.html#cb351-1" tabindex="-1"></a><span class="fu">head</span>(sp_pessoa_distr)</span></code></pre></div>
<pre><code>## Simple feature collection with 6 features and 13 fields
## Geometry type: POLYGON
## Dimension:     XY
## Bounding box:  xmin: 315542 ymin: 7343743 xmax: 360618.2 ymax: 7408231
## Projected CRS: SIRGAS 2000 / UTM zone 23S
##   ds_codigo        ds_nome ds_sigla ds_cd_sub       ds_subpref ds_areamt ds_areakmt  Total
## 1        51       MANDAQUI      MAN        05 SANTANA-TUCURUVI  13247864      13.25 107580
## 2        52       MARSILAC      MAR        20      PARELHEIROS 208195746     208.20   8258
## 3        32          MOEMA      MOE        12     VILA MARIANA   9079516       9.08  83368
## 4        31     GUAIANASES      GUA        28       GUAIANASES   8938527       8.94 103996
## 5        33       IGUATEMI      IGU        30       SAO MATEUS  19583557      19.58 127662
## 6        36 ITAIM PAULISTA      IPA        24   ITAIM PAULISTA  12143789      12.14 224074
##   Branca Preta Amarela  Parda Indigena                       geometry
## 1  79320  6209    2012  19985       54 POLYGON ((330950.4 7407837,...
## 2   4045   463      92   3533       42 POLYGON ((336124.1 7355302,...
## 3  75550   797    2915   4057       49 POLYGON ((331242.2 7392162,...
## 4  49907  9995     478  43557       59 POLYGON ((355108.2 7393291,...
## 5  61822  8559     785  56373      123 POLYGON ((350859.9 7389600,...
## 6  99761 19493    1333 103245      236 POLYGON ((359239.6 7402470,...</code></pre>
<div class="sourceCode" id="cb353"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb353-1"><a href="quanti2.html#cb353-1" tabindex="-1"></a>p <span class="ot">&lt;-</span> <span class="fu">ggplot</span>()<span class="sc">+</span></span>
<span id="cb353-2"><a href="quanti2.html#cb353-2" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="at">data =</span> sp_pessoa_distr, <span class="at">fill =</span> <span class="st">&quot;transparent&quot;</span>, <span class="at">colour =</span> <span class="st">&quot;white&quot;</span>)<span class="sc">+</span></span>
<span id="cb353-3"><a href="quanti2.html#cb353-3" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">data =</span> pts, <span class="fu">aes</span>(lon, lat, <span class="at">colour =</span> Etnia))<span class="sc">+</span></span>
<span id="cb353-4"><a href="quanti2.html#cb353-4" tabindex="-1"></a>  <span class="fu">scale_colour_manual</span>(<span class="at">values =</span> pal)<span class="sc">+</span></span>
<span id="cb353-5"><a href="quanti2.html#cb353-5" tabindex="-1"></a>  <span class="fu">coord_sf</span>(<span class="at">crs =</span> <span class="dv">31983</span>)<span class="sc">+</span></span>
<span id="cb353-6"><a href="quanti2.html#cb353-6" tabindex="-1"></a>  <span class="fu">theme_void</span>(<span class="at">base_family =</span> <span class="st">&quot;&quot;</span>, <span class="at">base_size =</span> <span class="dv">45</span>)<span class="sc">+</span></span>
<span id="cb353-7"><a href="quanti2.html#cb353-7" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="cn">NULL</span>, <span class="at">y =</span> <span class="cn">NULL</span>,</span>
<span id="cb353-8"><a href="quanti2.html#cb353-8" tabindex="-1"></a>       <span class="at">title =</span> <span class="st">&quot;Raça ou cor no município de São Paulo, Brasil&quot;</span>,</span>
<span id="cb353-9"><a href="quanti2.html#cb353-9" tabindex="-1"></a>       <span class="at">subtitle =</span> <span class="st">&quot;1 ponto = 200 pessoas&quot;</span>,</span>
<span id="cb353-10"><a href="quanti2.html#cb353-10" tabindex="-1"></a>       <span class="at">caption =</span> <span class="st">&quot;Fontes de dados: IBGE, Censo Demográfico 2010 | </span><span class="sc">\n</span><span class="st"> </span></span>
<span id="cb353-11"><a href="quanti2.html#cb353-11" tabindex="-1"></a><span class="st">       Elaborado por: @Ligiaviz&quot;</span>)<span class="sc">+</span></span>
<span id="cb353-12"><a href="quanti2.html#cb353-12" tabindex="-1"></a>  <span class="fu">guides</span>(<span class="at">colour =</span> <span class="fu">guide_legend</span>(<span class="at">override.aes =</span> <span class="fu">list</span>(<span class="at">size =</span> <span class="dv">5</span>)))<span class="sc">+</span></span>
<span id="cb353-13"><a href="quanti2.html#cb353-13" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="fl">1.01</span>), <span class="at">legend.direction =</span> <span class="st">&quot;horizontal&quot;</span>,</span>
<span id="cb353-14"><a href="quanti2.html#cb353-14" tabindex="-1"></a>        <span class="at">plot.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">&quot;#212121&quot;</span>, <span class="at">color =</span> <span class="cn">NA</span>), </span>
<span id="cb353-15"><a href="quanti2.html#cb353-15" tabindex="-1"></a>        <span class="at">panel.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">&quot;#212121&quot;</span>, <span class="at">color =</span> <span class="cn">NA</span>),</span>
<span id="cb353-16"><a href="quanti2.html#cb353-16" tabindex="-1"></a>        <span class="at">legend.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">&quot;#212121&quot;</span>, <span class="at">color =</span> <span class="cn">NA</span>),</span>
<span id="cb353-17"><a href="quanti2.html#cb353-17" tabindex="-1"></a>        <span class="at">legend.key =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">&quot;#212121&quot;</span>, <span class="at">colour =</span> <span class="cn">NA</span>),</span>
<span id="cb353-18"><a href="quanti2.html#cb353-18" tabindex="-1"></a>        <span class="at">plot.margin =</span> <span class="fu">margin</span>(<span class="fl">0.5</span>, <span class="fl">0.5</span>, <span class="fl">0.5</span>, <span class="fl">0.5</span>, <span class="st">&quot;cm&quot;</span>),</span>
<span id="cb353-19"><a href="quanti2.html#cb353-19" tabindex="-1"></a>        <span class="at">text =</span>  <span class="fu">element_text</span>(<span class="at">color =</span> <span class="st">&quot;white&quot;</span>),</span>
<span id="cb353-20"><a href="quanti2.html#cb353-20" tabindex="-1"></a>        <span class="at">title =</span>  <span class="fu">element_text</span>(<span class="at">color =</span> <span class="st">&quot;white&quot;</span>),</span>
<span id="cb353-21"><a href="quanti2.html#cb353-21" tabindex="-1"></a>        <span class="at">plot.caption =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">35</span>, <span class="at">hjust =</span> <span class="dv">1</span>))<span class="sc">+</span></span>
<span id="cb353-22"><a href="quanti2.html#cb353-22" tabindex="-1"></a>  ggspatial<span class="sc">::</span><span class="fu">annotation_scale</span>(<span class="at">location =</span> <span class="st">&quot;br&quot;</span>,</span>
<span id="cb353-23"><a href="quanti2.html#cb353-23" tabindex="-1"></a>                              <span class="at">text_cex=</span> <span class="dv">2</span>,</span>
<span id="cb353-24"><a href="quanti2.html#cb353-24" tabindex="-1"></a>                              <span class="at">text_col =</span> <span class="st">&quot;white&quot;</span>,</span>
<span id="cb353-25"><a href="quanti2.html#cb353-25" tabindex="-1"></a>                              <span class="at">bar_cols =</span> <span class="fu">c</span>(<span class="st">&quot;white&quot;</span>, <span class="st">&quot;white&quot;</span>),</span>
<span id="cb353-26"><a href="quanti2.html#cb353-26" tabindex="-1"></a>                              <span class="at">width_hint =</span> <span class="fl">0.4</span>,</span>
<span id="cb353-27"><a href="quanti2.html#cb353-27" tabindex="-1"></a>                              <span class="at">line_width =</span> <span class="fl">0.5</span>,</span>
<span id="cb353-28"><a href="quanti2.html#cb353-28" tabindex="-1"></a>                              <span class="at">height =</span> <span class="fu">unit</span>(<span class="fl">0.3</span>,<span class="st">&quot;cm&quot;</span>))</span></code></pre></div>
<p>Vamos exportar no formato png com boa resolução.</p>
<div class="sourceCode" id="cb354"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb354-1"><a href="quanti2.html#cb354-1" tabindex="-1"></a><span class="co">#para exportar o mapa como figura</span></span>
<span id="cb354-2"><a href="quanti2.html#cb354-2" tabindex="-1"></a><span class="fu">ggsave</span>(<span class="st">&quot;etnia.png&quot;</span>, <span class="at">plot =</span> p, <span class="at">dpi =</span> <span class="dv">320</span>, <span class="at">width =</span> <span class="dv">85</span>, <span class="at">height =</span> <span class="dv">70</span>, <span class="at">units =</span> <span class="st">&quot;cm&quot;</span>)</span></code></pre></div>
<p>A figura exportada deverá ter a aparência a seguir.
<img src="etnia.png" width="5354" /></p>
</div>
<div id="referências-sugeridas-2" class="section level2 hasAnchor" number="9.4">
<h2><span class="header-section-number">9.4</span> Referências sugeridas<a href="quanti2.html#referências-sugeridas-2" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>Grupos étnicos de Chicago</strong>, desenvovido por <a href="http://www.radicalcartography.net/index.html?chicagodots">Bill Rankin (2009)</a></p>
<p><strong>Votos em Londres, segundo partidos políticos</strong>, <a href="https://gist.github.com/PaulC91/9cc8551d5475620cb5c5d87ee1609257">Tom Campbell</a></p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="quanti1.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="quanti3.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/ligiaviz/RCartoTematica/edit/main/09-dens-pontos1.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": "https://github.com/ligiaviz/RCartoTematica/blob/main/09-dens-pontos1.Rmd",
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
